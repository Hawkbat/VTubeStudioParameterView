(this["webpackJsonpvtube-studio-parameter-view"]=this["webpackJsonpvtube-studio-parameter-view"]||[]).push([[0],{19:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(3),i=n.n(r),o=n(13),s=n.n(o),a=(n(19),n(0)),c=n.n(a),u=n(14),l=n(8),d=n(9),v=n(5),h=(n(21),n(10)),f=n(12),b=n(2),m=n(4),p=function(){function e(t,n){Object(b.a)(this,e),this.ws=void 0,this._url=void 0,this._protocols=void 0,this.bufferedSends=[],this.eventListeners=new Map,this.reconnectHandle=null,this.reconnectTimeout=0,this.onopen=null,this.onmessage=null,this.onerror=null,this.onclose=null,this._url=t,this._protocols=n,this.performReconnect()}return Object(m.a)(e,[{key:"url",get:function(){return this._url},set:function(e){e!==this._url&&(this._url=e,this.performReconnect())}},{key:"protocol",get:function(){return this.ws.protocol}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(e){this.ws.binaryType=e}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"extensions",get:function(){return this.ws.extensions}},{key:"CLOSED",get:function(){return this.ws.CLOSED}},{key:"CLOSING",get:function(){return this.ws.CLOSING}},{key:"CONNECTING",get:function(){return this.ws.CONNECTING}},{key:"OPEN",get:function(){return this.ws.OPEN}},{key:"addEventListener",value:function(e,t,n){var r,i=null!==(r=this.eventListeners.get(e))&&void 0!==r?r:[];i.push({listener:t,options:n}),this.eventListeners.set(e,i),this.ws.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){var r,i=null!==(r=this.eventListeners.get(e))&&void 0!==r?r:[],o=i.findIndex((function(e){return e.listener===t&&(e.options===n||"object"===typeof e.options&&"object"===typeof n&&e.options.capture===n.capture)}));o>=0&&i.splice(o,1),this.ws.removeEventListener(e,t,n)}},{key:"dispatchEvent",value:function(e){return this.ws.dispatchEvent(e)}},{key:"close",value:function(e,t){this.ws.close(e,t)}},{key:"send",value:function(e){this.ws.readyState===this.ws.OPEN?this.ws.send(e):this.bufferedSends.unshift(e)}},{key:"performReconnect",value:function(){var e=this;try{var t,n,r,i,o,s=this.ws;s&&s.readyState===s.OPEN&&s.close(3012,"Reconnecting");var a=new WebSocket(s?this._url:"wss://echo.websocket.org",this._protocols);a.binaryType=null!==(t=null===s||void 0===s?void 0:s.binaryType)&&void 0!==t?t:a.binaryType,a.onopen=null!==(n=null===s||void 0===s?void 0:s.onopen)&&void 0!==n?n:a.onopen,a.onmessage=null!==(r=null===s||void 0===s?void 0:s.onmessage)&&void 0!==r?r:a.onmessage,a.onerror=null!==(i=null===s||void 0===s?void 0:s.onerror)&&void 0!==i?i:a.onerror,a.onclose=null!==(o=null===s||void 0===s?void 0:s.onclose)&&void 0!==o?o:a.onclose,this.ws=a,s||this.reconnect();var c,u=Object(f.a)(this.eventListeners.entries());try{for(u.s();!(c=u.n()).done;){var l,d=Object(v.a)(c.value,2),h=d[0],b=d[1],m=Object(f.a)(b);try{for(m.s();!(l=m.n()).done;){var p=l.value;s&&s.removeEventListener(h,p.listener,p.options),a.addEventListener(h,p.listener,p.options)}}catch(j){m.e(j)}finally{m.f()}}}catch(j){u.e(j)}finally{u.f()}a.addEventListener("open",(function(t){var n;if(a===e.ws)for(e.reconnectTimeout=0,null===(n=e.onopen)||void 0===n||n.call(e,t);e.bufferedSends.length;)a.send(e.bufferedSends.pop());else a.close(3012,"Reconnecting")})),a.addEventListener("message",(function(t){var n;null===(n=e.onmessage)||void 0===n||n.call(e,t)})),a.addEventListener("error",(function(t){var n;null===(n=e.onerror)||void 0===n||n.call(e,t)})),a.addEventListener("close",(function(t){var n;null===(n=e.onclose)||void 0===n||n.call(e,t),a===e.ws&&e.reconnect()}))}catch(O){console.error(O),this.reconnect()}}},{key:"reconnect",value:function(){var e=this;this.reconnectHandle&&(clearTimeout(this.reconnectHandle),this.reconnectHandle=null),this.reconnectHandle=setTimeout((function(){return e.performReconnect()}),this.reconnectTimeout),this.reconnectTimeout=Math.min(8e3,2*Math.max(1e3,this.reconnectTimeout))}}]),e}(),j=n(1),O="vtstudio-parameter-view-token",y="vtstudio-parameter-view-filter",g="vtstudio-parameter-view-favorites";function w(e){return Math.round(1e3*e)/1e3}var x=function(){var e=Object(r.useState)(!1),t=Object(v.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(),s=Object(v.a)(o,2),a=s[0],f=s[1],b=Object(r.useState)(""),m=Object(v.a)(b,2),x=m[0],k=m[1],L=Object(r.useState)((function(){var e;return null!==(e=localStorage.getItem(y))&&void 0!==e?e:""})),S=Object(v.a)(L,2),E=S[0],N=S[1],T=Object(r.useState)((function(){var e;return JSON.parse(null!==(e=localStorage.getItem(g))&&void 0!==e?e:"[]").reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(l.a)({},t,!0))}),{})})),C=Object(v.a)(T,2),I=C[0],F=C[1],M=Object(r.useRef)(null);Object(r.useEffect)((function(){var e,t=new p("ws://localhost:8001"),n=new h.c(t),r=new h.a(n),o=null!==(e=localStorage.getItem(O))&&void 0!==e?e:void 0,s=new h.b(r,"Parameter View","Hawkbar",void 0,o,(function(e){return localStorage.setItem(O,e)})),a={active:!0};t.addEventListener("open",(function(){return i(!0)})),t.addEventListener("close",(function(){return i(!1)}));var l=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.apiClient.live2DParameterList();case 3:t=e.sent,n=t.modelLoaded,r=t.parameters,f(n?r:null),k(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),k(""+e.t0);case 13:requestAnimationFrame(l);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return l(),function(){a.active=!1}}),[]),Object(r.useEffect)((function(){var e=function(e){1===e.key.length?(M.current&&M.current.focus(),N((function(t){return t+e.key}))):"Backspace"===e.key&&(M.current&&M.current.focus(),N((function(e){return e.substr(0,e.length-1)})))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]);var P=E?null===a||void 0===a?void 0:a.filter((function(e){return e.name.toLowerCase().includes(E.toLowerCase())})):a,R=null===P||void 0===P?void 0:P.sort((function(e,t){return(I[t.name]?1:0)-(I[e.name]?1:0)}));return Object(j.jsxs)("div",{className:"App",children:[n&&!x&&(null===a||void 0===a?void 0:a.length)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("label",{children:["Filter:\xa0",Object(j.jsx)("input",{ref:M,type:"text",defaultValue:E,onChange:function(e){return function(e){localStorage.setItem(y,e),N(e)}(e.target.value)}})]}),Object(j.jsx)("br",{})]}):null,n&&!x?Object(j.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto auto 60px 1fr 60px 60px"},children:[Object(j.jsx)("label",{children:"\u2605"}),Object(j.jsx)("label",{children:"Parameter Name"}),Object(j.jsx)("label",{children:"Min"}),Object(j.jsx)("label",{children:"Range"}),Object(j.jsx)("label",{children:"Max"}),Object(j.jsx)("label",{children:"Value"}),R?R.map((function(e,t){return Object(j.jsxs)(r.Fragment,{children:[Object(j.jsx)("div",{className:"paramFave",onClick:function(){return function(e){var t=Object(d.a)({},I);t[e]?delete t[e]:t[e]=!0,localStorage.setItem(g,JSON.stringify(Object.keys(t))),F(t)}(e.name)},children:I[e.name]?"\u2605":"\u2606"}),Object(j.jsx)("div",{className:"paramName",children:e.name}),Object(j.jsx)("div",{className:"paramMin",children:w(e.min)}),Object(j.jsx)("input",{className:"paramRange",type:"range",min:e.min,max:e.max,step:"any",value:w(e.value),readOnly:!0}),Object(j.jsx)("div",{className:"paramMax",children:w(e.max)}),Object(j.jsx)("div",{className:"paramValue",children:w(e.value)})]},e.name+t)})):Object(j.jsx)("i",{children:"No model is currently loaded. Load a model to view Live2D parameters."})]}):Object(j.jsx)("i",{title:x,children:"Not connected to VTube Studio. Ensure that you are running the latest version of the VTube Studio beta on the same device as this webpage."})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),o(e),s(e)}))};s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("root")),k()}},[[23,1,2]]]);
//# sourceMappingURL=main.39422dc0.chunk.js.map